package launchers;

import java.io.File;
import java.io.FilenameFilter;
import java.io.IOException;

import utilities.InFile;
import utilities.OutFile;
import utilities.State;

public class ParseNY
{
	public static void main(String args[])
	{
		State st = State.NY;
		InFile in = null;
		
		OutFile out = null;
		try
		{
			out = new OutFile(st.getPath() + "\\NY_county.txt", false);
			out.writeLine("state\tyear\tgeographyType\tcandName\toffice\tdistrict\tparty\t"
					+ "locationName\tvotes\tvotePerc");
		}
		catch (IOException e)
		{
			System.err.println("Error opening output file.");
			e.printStackTrace();
		}
		
		for (Integer year : st.getYears())
		{ //loop through years
			System.out.println("Parsing " + year + "...");
			File[] files = new File(st.getPath()).listFiles(new FilenameFilter()
			{
				public boolean accept(File dir, String name)
				{
					if (name.matches("^" + year + "[A-Z]*" + State.NE2.getFileType() + "$")) return true;
					else return false;
				}
			});
			
			for (File file : files)
			{ //loop through offices in year
				String off = file.getName().replace(st.getFileType(), "").replaceAll("\\d", "");
				String line = null;
				
				try
				{
					in = new InFile(file);
					line = in.readLine();
					System.out.println(line);
				}
				catch (IOException e)
				{
					System.err.println("Error opening " + file.getPath());
					e.printStackTrace();
				}
				in.close();
			} //end loop through offices
		} //end loop through years
		
		out.close();
	}
}
